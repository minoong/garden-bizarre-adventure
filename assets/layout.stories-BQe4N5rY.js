import{j as n}from"./jsx-runtime-Cm4kmXrJ.js";import{r as i}from"./iframe-BNfWz_4K.js";import{c as H,a as R,I as fe,P as ge,e as Fe,g as Oe,h as te,o as J,d as ze,i as ie}from"./Modal-CHuexLBh.js";import{m as M,A as he,p as We}from"./proxy-feCnUvF-.js";import{C as De}from"./Close-ClCf-qDC.js";import{p as Be,c as ne,q as le,t as Q,v as He,w as $e,x as Ne,b as _,g as G,e as qe,y as ce,a as oe,u as K,s as F,d as B,m as re,l as ee,z as de,k as Ve,B as P,T as I}from"./Box-ChaHMmFc.js";import{G as Ue,B as $,D as _e,a as Ge,b as Ke}from"./Grow-wtuHV0_3.js";import{s as Xe,u as Ye}from"./useThemeProps-BQyh8yDP.js";import"./preload-helper-PPVm8Dsz.js";import"./index-Cf05sf_a.js";import"./feature-bundle-SBYsByI0.js";const Ze=qe(),Je=Xe("div",{name:"MuiStack",slot:"Root"});function Qe(e){return Ye({props:e,name:"MuiStack",defaultTheme:Ze})}function et(e,t){const r=i.Children.toArray(e).filter(Boolean);return r.reduce((o,s,a)=>(o.push(s),a<r.length-1&&o.push(i.cloneElement(t,{key:`separator-${a}`})),o),[])}const tt=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],nt=({ownerState:e,theme:t})=>{let r={display:"flex",flexDirection:"column",...le({theme:t},Q({values:e.direction,breakpoints:t.breakpoints.values}),o=>({flexDirection:o}))};if(e.spacing){const o=He(t),s=Object.keys(t.breakpoints.values).reduce((u,d)=>((typeof e.spacing=="object"&&e.spacing[d]!=null||typeof e.direction=="object"&&e.direction[d]!=null)&&(u[d]=!0),u),{}),a=Q({values:e.direction,base:s}),k=Q({values:e.spacing,base:s});typeof a=="object"&&Object.keys(a).forEach((u,d,h)=>{if(!a[u]){const x=d>0?a[h[d-1]]:"column";a[u]=x}}),r=$e(r,le({theme:t},k,(u,d)=>e.useFlexGap?{gap:ce(o,u)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${tt(d?a[d]:e.direction)}`]:ce(o,u)}}))}return r=Ne(t.breakpoints,r),r};function ot(e={}){const{createStyledComponent:t=Je,useThemeProps:r=Qe,componentName:o="MuiStack"}=e,s=()=>_({root:["root"]},u=>G(o,u),{}),a=t(nt);return i.forwardRef(function(u,d){const h=r(u),l=Be(h),{component:x="div",direction:C="column",spacing:m=0,divider:v,children:w,className:p,useFlexGap:y=!1,...S}=l,c={direction:C,spacing:m,useFlexGap:y},f=s();return n.jsx(a,{as:x,ownerState:c,ref:d,className:ne(f.root,p),...S,children:v?et(w,v):w})})}function rt(e){return G("MuiAlert",e)}const ue=oe("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),at=H(n.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),st=H(n.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),it=H(n.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),lt=H(n.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),ct=H(n.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),dt=e=>{const{variant:t,color:r,severity:o,classes:s}=e,a={root:["root",`color${B(r||o)}`,`${t}${B(r||o)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return _(a,rt,s)},ut=F(ge,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${B(r.color||r.severity)}`]]}})(re(({theme:e})=>{const t=e.palette.mode==="light"?e.darken:e.lighten,r=e.palette.mode==="light"?e.lighten:e.darken;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(ee(["light"])).map(([o])=>({props:{colorSeverity:o,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${o}Color`]:t(e.palette[o].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${o}StandardBg`]:r(e.palette[o].light,.9),[`& .${ue.icon}`]:e.vars?{color:e.vars.palette.Alert[`${o}IconColor`]}:{color:e.palette[o].main}}})),...Object.entries(e.palette).filter(ee(["light"])).map(([o])=>({props:{colorSeverity:o,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${o}Color`]:t(e.palette[o].light,.6),border:`1px solid ${(e.vars||e).palette[o].light}`,[`& .${ue.icon}`]:e.vars?{color:e.vars.palette.Alert[`${o}IconColor`]}:{color:e.palette[o].main}}})),...Object.entries(e.palette).filter(ee(["dark"])).map(([o])=>({props:{colorSeverity:o,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${o}FilledColor`],backgroundColor:e.vars.palette.Alert[`${o}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[o].dark:e.palette[o].main,color:e.palette.getContrastText(e.palette[o].main)}}}))]}})),pt=F("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),mt=F("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),ft=F("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),pe={success:n.jsx(at,{fontSize:"inherit"}),warning:n.jsx(st,{fontSize:"inherit"}),error:n.jsx(it,{fontSize:"inherit"}),info:n.jsx(lt,{fontSize:"inherit"})},gt=i.forwardRef(function(t,r){const o=K({props:t,name:"MuiAlert"}),{action:s,children:a,className:k,closeText:g="Close",color:u,components:d={},componentsProps:h={},icon:l,iconMapping:x=pe,onClose:C,role:m="alert",severity:v="success",slotProps:w={},slots:p={},variant:y="standard",...S}=o,c={...o,color:u,severity:v,variant:y,colorSeverity:u||v},f=dt(c),b={slots:{closeButton:d.CloseButton,closeIcon:d.CloseIcon,...p},slotProps:{...h,...w}},[L,T]=R("root",{ref:r,shouldForwardComponentProp:!0,className:ne(f.root,k),elementType:ut,externalForwardedProps:{...b,...S},ownerState:c,additionalProps:{role:m,elevation:0}}),[j,O]=R("icon",{className:f.icon,elementType:pt,externalForwardedProps:b,ownerState:c}),[A,D]=R("message",{className:f.message,elementType:mt,externalForwardedProps:b,ownerState:c}),[N,q]=R("action",{className:f.action,elementType:ft,externalForwardedProps:b,ownerState:c}),[z,X]=R("closeButton",{elementType:fe,externalForwardedProps:b,ownerState:c}),[Y,Z]=R("closeIcon",{elementType:ct,externalForwardedProps:b,ownerState:c});return n.jsxs(L,{...T,children:[l!==!1?n.jsx(j,{...O,children:l||x[v]||pe[v]}):null,n.jsx(A,{...D,children:a}),s!=null?n.jsx(N,{...q,children:s}):null,s==null&&C?n.jsx(N,{...q,children:n.jsx(z,{size:"small","aria-label":g,title:g,color:"inherit",onClick:C,...X,children:n.jsx(Y,{fontSize:"small",...Z})})}):null]})});function me(e){return e.substring(2).toLowerCase()}function ht(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function yt(e){const{children:t,disableReactTree:r=!1,mouseEvent:o="onClick",onClickAway:s,touchEvent:a="onTouchEnd"}=e,k=i.useRef(!1),g=i.useRef(null),u=i.useRef(!1),d=i.useRef(!1);i.useEffect(()=>(setTimeout(()=>{u.current=!0},0),()=>{u.current=!1}),[]);const h=Fe(Oe(t),g),l=te(m=>{const v=d.current;d.current=!1;const w=J(g.current);if(!u.current||!g.current||"clientX"in m&&ht(m,w))return;if(k.current){k.current=!1;return}let p;m.composedPath?p=m.composedPath().includes(g.current):p=!w.documentElement.contains(m.target)||g.current.contains(m.target),!p&&(r||!v)&&s(m)}),x=m=>v=>{d.current=!0;const w=t.props[m];w&&w(v)},C={ref:h};return a!==!1&&(C[a]=x(a)),i.useEffect(()=>{if(a!==!1){const m=me(a),v=J(g.current),w=()=>{k.current=!0};return v.addEventListener(m,l),v.addEventListener("touchmove",w),()=>{v.removeEventListener(m,l),v.removeEventListener("touchmove",w)}}},[l,a]),o!==!1&&(C[o]=x(o)),i.useEffect(()=>{if(o!==!1){const m=me(o),v=J(g.current);return v.addEventListener(m,l),()=>{v.removeEventListener(m,l)}}},[l,o]),i.cloneElement(t,C)}function xt(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:r=!1,onClose:o,open:s,resumeHideDuration:a}=e,k=ze();i.useEffect(()=>{if(!s)return;function p(y){y.defaultPrevented||y.key==="Escape"&&o?.(y,"escapeKeyDown")}return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[s,o]);const g=te((p,y)=>{o?.(p,y)}),u=te(p=>{!o||p==null||k.start(p,()=>{g(null,"timeout")})});i.useEffect(()=>(s&&u(t),k.clear),[s,t,u,k]);const d=p=>{o?.(p,"clickaway")},h=k.clear,l=i.useCallback(()=>{t!=null&&u(a??t*.5)},[t,a,u]),x=p=>y=>{const S=p.onBlur;S?.(y),l()},C=p=>y=>{const S=p.onFocus;S?.(y),h()},m=p=>y=>{const S=p.onMouseEnter;S?.(y),h()},v=p=>y=>{const S=p.onMouseLeave;S?.(y),l()};return i.useEffect(()=>{if(!r&&s)return window.addEventListener("focus",l),window.addEventListener("blur",h),()=>{window.removeEventListener("focus",l),window.removeEventListener("blur",h)}},[r,s,l,h]),{getRootProps:(p={})=>{const y={...ie(e),...ie(p)};return{role:"presentation",...p,...y,onBlur:x(y),onFocus:C(y),onMouseEnter:m(y),onMouseLeave:v(y)}},onClickAway:d}}function vt(e){return G("MuiSnackbarContent",e)}oe("MuiSnackbarContent",["root","message","action"]);const bt=e=>{const{classes:t}=e;return _({root:["root"],action:["action"],message:["message"]},vt,t)},kt=F(ge,{name:"MuiSnackbarContent",slot:"Root"})(re(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98;return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(de(e.palette.background.default,t)),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:de(e.palette.background.default,t),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),Ct=F("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),wt=F("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),St=i.forwardRef(function(t,r){const o=K({props:t,name:"MuiSnackbarContent"}),{action:s,className:a,message:k,role:g="alert",...u}=o,d=o,h=bt(d);return n.jsxs(kt,{role:g,elevation:6,className:ne(h.root,a),ownerState:d,ref:r,...u,children:[n.jsx(Ct,{className:h.message,ownerState:d,children:k}),s?n.jsx(wt,{className:h.action,ownerState:d,children:s}):null]})});function Mt(e){return G("MuiSnackbar",e)}oe("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const jt=e=>{const{classes:t,anchorOrigin:r}=e,o={root:["root",`anchorOrigin${B(r.vertical)}${B(r.horizontal)}`]};return _(o,Mt,t)},Pt=F("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`anchorOrigin${B(r.anchorOrigin.vertical)}${B(r.anchorOrigin.horizontal)}`]]}})(re(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Lt=i.forwardRef(function(t,r){const o=K({props:t,name:"MuiSnackbar"}),s=Ve(),a={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{action:k,anchorOrigin:{vertical:g,horizontal:u}={vertical:"bottom",horizontal:"left"},autoHideDuration:d=null,children:h,className:l,ClickAwayListenerProps:x,ContentProps:C,disableWindowBlurListener:m=!1,message:v,onBlur:w,onClose:p,onFocus:y,onMouseEnter:S,onMouseLeave:c,open:f,resumeHideDuration:b,slots:L={},slotProps:T={},TransitionComponent:j,transitionDuration:O=a,TransitionProps:{onEnter:A,onExited:D,...N}={},...q}=o,z={...o,anchorOrigin:{vertical:g,horizontal:u},autoHideDuration:d,disableWindowBlurListener:m,TransitionComponent:j,transitionDuration:O},X=jt(z),{getRootProps:Y,onClickAway:Z}=xt({...z}),[ke,se]=i.useState(!0),Ce=W=>{se(!0),D&&D(W)},we=(W,E)=>{se(!1),A&&A(W,E)},V={slots:{transition:j,...L},slotProps:{content:C,clickAwayListener:x,transition:N,...T}},[Se,Me]=R("root",{ref:r,className:[X.root,l],elementType:Pt,getSlotProps:Y,externalForwardedProps:{...V,...q},ownerState:z}),[je,{ownerState:Pe,...Le}]=R("clickAwayListener",{elementType:yt,externalForwardedProps:V,getSlotProps:W=>({onClickAway:(...E)=>{const Ie=E[0];W.onClickAway?.(...E),!Ie?.defaultMuiPrevented&&Z(...E)}}),ownerState:z}),[Te,Ee]=R("content",{elementType:St,shouldForwardComponentProp:!0,externalForwardedProps:V,additionalProps:{message:v,action:k},ownerState:z}),[Re,Ae]=R("transition",{elementType:Ue,externalForwardedProps:V,getSlotProps:W=>({onEnter:(...E)=>{W.onEnter?.(...E),we(...E)},onExited:(...E)=>{W.onExited?.(...E),Ce(...E)}}),additionalProps:{appear:!0,in:f,timeout:O,direction:g==="top"?"down":"up"},ownerState:z});return!f&&ke?null:n.jsx(je,{...Le,...L.clickAwayListener&&{ownerState:Pe},children:n.jsx(Se,{...Me,children:n.jsx(Re,{...Ae,children:h||n.jsx(Te,{...Ee})})})})}),Tt=ot({createStyledComponent:F("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>K({props:e,name:"MuiStack"})}),Et=H(n.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}));function Rt({open:e,imageFiles:t}){const[r,o]=i.useState(0),[s,a]=i.useState(new Map),[k,g]=i.useState(new Map),[u,d]=i.useState(!1),h=i.useRef(null),l=i.useRef(null),x=i.useRef(null),C=i.useRef(r);i.useEffect(()=>{C.current=r},[r]);const m=t[r],v=s.get(r);i.useEffect(()=>{if(!e){o(0);return}const c=new Map;t.forEach((f,b)=>{f.metadata?.latitude&&f.metadata?.longitude&&c.set(b,{lat:f.metadata.latitude,lng:f.metadata.longitude})}),a(new Map(c)),g(c)},[e]),i.useEffect(()=>{e||(x.current&&(x.current.setMap(null),x.current=null),l.current&&(l.current=null))},[e]);const w=i.useCallback(()=>{const c=k.get(r);a(c?f=>{const b=new Map(f);return b.set(r,c),b}:f=>{const b=new Map(f);return b.delete(r),b})},[r,k]),p=i.useCallback(()=>{h.current&&window.kakao.maps.load(()=>{if(h.current){if(typeof kakao>"u"||!kakao.maps){console.error("카카오 맵 SDK가 로드되지 않았습니다.");return}if(!l.current){const c=s.get(r),f=c?new kakao.maps.LatLng(c.lat,c.lng):new kakao.maps.LatLng(37.5665,126.978),b={center:f,level:3},L=new kakao.maps.Map(h.current,b);if(l.current=L,kakao.maps.event.addListener(L,"click",T=>{const j=T.latLng,O={lat:j.getLat(),lng:j.getLng()};a(A=>{const D=new Map(A);return D.set(C.current,O),D})}),c){const T=new kakao.maps.Marker({position:f,map:L,draggable:!0});kakao.maps.event.addListener(T,"dragend",()=>{const j=T.getPosition();a(O=>{const A=new Map(O);return A.set(C.current,{lat:j.getLat(),lng:j.getLng()}),A})}),x.current=T}}}})},[s,r]);i.useEffect(()=>{if(!e||!l.current||!m)return;const c=s.get(r);if(x.current&&(x.current.setMap(null),x.current=null),c){const f=new kakao.maps.LatLng(c.lat,c.lng),b=new kakao.maps.Marker({position:f,map:l.current,draggable:!0});kakao.maps.event.addListener(b,"dragend",()=>{const L=b.getPosition();a(T=>{const j=new Map(T);return j.set(C.current,{lat:L.getLat(),lng:L.getLng()}),j})}),x.current=b,l.current.setCenter(f)}},[e,r,m,s]);const y=i.useCallback(c=>{o(c);const f=t[c];f.metadata?.latitude&&f.metadata?.longitude||d(!0)},[t]),S=i.useCallback(()=>{d(!1)},[]);return{selectedIndex:r,imageFiles:t,markerPositions:s,originalPositions:k,showToast:u,mapRef:h,kakaoMapRef:l,markerRef:x,selectedFile:m,currentPosition:v,handleImageSelect:y,handleReset:w,handleDialogEntered:p,handleCloseToast:S}}function ye({imageFiles:e,selectedIndex:t,markerPositions:r,onImageSelect:o}){return n.jsxs(P,{component:M.div,initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1},sx:{width:{xs:"100%",md:280},borderRight:{md:1},borderColor:"divider",bgcolor:"grey.50",overflowY:"auto",display:"flex",flexDirection:"column",gap:1,p:2,"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{bgcolor:"transparent"},"&::-webkit-scrollbar-thumb":{bgcolor:"transparent",borderRadius:"3px",transition:"background-color 0.2s"},"&:hover::-webkit-scrollbar-thumb":{bgcolor:"grey.400"},"&::-webkit-scrollbar-thumb:hover":{bgcolor:"grey.600"}},children:[n.jsxs(I,{variant:"subtitle2",fontWeight:"bold",sx:{mb:1},children:["이미지 목록 (",e.length,")"]}),e.map((s,a)=>n.jsxs(P,{component:M.div,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:a*.05},whileTap:{scale:.98},onClick:()=>o(a),sx:{flexShrink:0,cursor:"pointer",border:2,borderColor:t===a?"primary.main":"grey.300",borderRadius:1,overflow:"hidden",position:"relative",bgcolor:"background.paper","&:hover":{borderColor:"primary.light",boxShadow:2},"&:hover img":{transform:"scale(1.1)"}},children:[s.preview&&n.jsx(P,{component:"img",src:s.preview,alt:s.file.name,sx:{width:"100%",height:160,objectFit:"cover",transition:"transform 0.1s ease-in-out"}}),n.jsx(he,{children:r.has(a)&&n.jsx(P,{component:M.div,initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",stiffness:300,damping:20},sx:{position:"absolute",top:8,right:8,bgcolor:"success.main",color:"white",borderRadius:"50%",width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:"bold",boxShadow:2},children:"✓"})}),n.jsx(P,{component:M.div,animate:{backgroundColor:t===a?"rgba(25, 118, 210, 0.12)":"rgba(255, 255, 255, 1)"},transition:{duration:.2},sx:{p:1},children:n.jsx(I,{variant:"caption",sx:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:t===a?"bold":"normal",color:t===a?"primary.main":"text.secondary"},children:s.file.name})})]},s.id))]})}ye.__docgenInfo={description:"",methods:[],displayName:"ImageList",props:{imageFiles:{required:!0,tsType:{name:"Array",elements:[{name:"FileWithMetadata"}],raw:"FileWithMetadata[]"},description:""},selectedIndex:{required:!0,tsType:{name:"number"},description:""},markerPositions:{required:!0,tsType:{name:"Map",elements:[{name:"number"},{name:"MarkerPosition"}],raw:"Map<number, MarkerPosition>"},description:""},onImageSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}}};function xe({selectedFile:e,currentPosition:t}){return n.jsxs(P,{component:M.div,initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},transition:{duration:.4,delay:.2},sx:{position:"absolute",top:16,left:16,bgcolor:"background.paper",p:2,borderRadius:1,boxShadow:2,zIndex:10,maxWidth:300},children:[n.jsx(I,{variant:"body2",fontWeight:"bold",gutterBottom:!0,children:e&&e.file.name}),n.jsx(he,{mode:"wait",children:t?n.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[n.jsxs(I,{variant:"caption",display:"block",children:["위도: ",t.lat.toFixed(6)]}),n.jsxs(I,{variant:"caption",display:"block",children:["경도: ",t.lng.toFixed(6)]})]},"position"):n.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:n.jsx(I,{variant:"caption",color:"text.secondary",children:"지도를 클릭하여 위치를 설정하세요"})},"no-position")})]})}xe.__docgenInfo={description:"",methods:[],displayName:"MapInfo",props:{selectedFile:{required:!1,tsType:{name:"FileWithMetadata"},description:""},currentPosition:{required:!1,tsType:{name:"MarkerPosition"},description:""}}};const At=H(n.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}));function ve({onReset:e,hasPosition:t}){return n.jsx(P,{component:M.div,initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},transition:{duration:.4,delay:.3},sx:{position:"absolute",top:16,right:16,zIndex:10,display:"flex",gap:1},children:n.jsx($,{component:M.button,whileHover:{scale:1.05},whileTap:{scale:.95},variant:"contained",startIcon:n.jsx(At,{}),onClick:e,disabled:!t,children:"초기화"})})}ve.__docgenInfo={description:"",methods:[],displayName:"MapToolbar",props:{onReset:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},hasPosition:{required:!0,tsType:{name:"boolean"},description:""}}};function be({mapRef:e,selectedFile:t,currentPosition:r,onReset:o}){return n.jsxs(P,{component:M.div,initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.4,delay:.15},sx:{flex:1,position:"relative",display:"flex",flexDirection:"column"},children:[n.jsx(P,{ref:e,sx:{width:"100%",height:"100%",minHeight:400}}),n.jsx(xe,{selectedFile:t,currentPosition:r}),n.jsx(ve,{onReset:o,hasPosition:!!r})]})}be.__docgenInfo={description:"",methods:[],displayName:"MapView",props:{mapRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""},selectedFile:{required:!1,tsType:{name:"FileWithMetadata"},description:""},currentPosition:{required:!1,tsType:{name:"MarkerPosition"},description:""},onReset:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function ae({open:e,onClose:t,dropzoneFiles:r,onApply:o}){const[s,a]=i.useState(!1),{selectedIndex:k,imageFiles:g,selectedFile:u,markerPositions:d,currentPosition:h,handleImageSelect:l,handleReset:x,handleDialogEntered:C,mapRef:m}=Rt({open:e,imageFiles:r}),v=S=>{l(S);const c=g[S];c.metadata?.latitude&&c.metadata?.longitude||a(!0)},w=()=>{a(!1)},p=()=>{const S=g.map((c,f)=>{const b=d.get(f);return b?{...c,metadata:{...c.metadata,latitude:b.lat,longitude:b.lng}}:c});o(S),t()},y=()=>{t()};return g.length===0?null:n.jsx(_e,{open:e,onClose:t,maxWidth:!1,fullScreen:!0,slotProps:{transition:{onEntered:C}},children:n.jsxs(P,{sx:{display:"flex",flexDirection:"column",height:"100vh"},children:[n.jsxs(P,{component:M.div,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,borderBottom:1,borderColor:"divider"},children:[n.jsx(I,{variant:"h5",fontWeight:"bold",children:"위치 설정"}),n.jsx(fe,{onClick:t,children:n.jsx(De,{})})]}),n.jsxs(Ge,{sx:{flex:1,display:"flex",p:0,overflow:"hidden"},children:[n.jsx(ye,{imageFiles:g,selectedIndex:k,markerPositions:d,onImageSelect:v}),n.jsx(be,{mapRef:m,selectedFile:u,currentPosition:h,onReset:x})]}),n.jsx(P,{component:M.div,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:n.jsxs(Ke,{sx:{p:2,borderTop:1,borderColor:"divider",gap:1},children:[n.jsx($,{component:M.button,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:y,variant:"outlined",size:"large",children:"취소"}),n.jsx($,{component:M.button,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:p,variant:"contained",size:"large",children:"적용"})]})}),n.jsx(Lt,{open:s,autoHideDuration:3e3,onClose:w,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{bottom:{xs:70,sm:80}},children:n.jsx(gt,{onClose:w,severity:"warning",sx:{width:"100%"},children:"이 이미지에는 위치 정보가 없습니다. 지도를 클릭하여 위치를 설정하세요."})})]})})}ae.__docgenInfo={description:"",methods:[],displayName:"LocationSettingModalLayout",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},dropzoneFiles:{required:!0,tsType:{name:"Array",elements:[{name:"FileWithMetadata"}],raw:"FileWithMetadata[]"},description:""},onApply:{required:!0,tsType:{name:"signature",type:"function",raw:"(updatedFiles: FileWithMetadata[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"FileWithMetadata"}],raw:"FileWithMetadata[]"},name:"updatedFiles"}],return:{name:"void"}}},description:""}}};const Ut={title:"Features/LocationSettingModal",component:ae,parameters:{layout:"centered"},tags:["autodocs"]};function It(){const[e,t]=i.useState(!1),[r,o]=i.useState([]),[s,a]=i.useState(!1),k=i.useRef(null),g=async l=>{const x=l.target.files;if(x){a(!0);try{const C=Array.from(x),m=await We(C);o(m)}finally{a(!1)}}},u=()=>{if(r.length===0){alert("먼저 파일을 업로드해주세요.");return}t(!0)},d=()=>t(!1),h=l=>{console.log("Updated files:",l),o(l),t(!1)};return n.jsxs(P,{sx:{p:3,minWidth:400},children:[n.jsxs(Tt,{spacing:2,children:[n.jsx(I,{variant:"h6",children:"위치 설정 모달"}),n.jsxs($,{variant:"outlined",component:"label",startIcon:n.jsx(Et,{}),fullWidth:!0,children:["이미지 파일 선택",n.jsx("input",{ref:k,type:"file",hidden:!0,accept:"image/*",multiple:!0,onChange:g})]}),r.length>0&&!s&&n.jsxs(I,{variant:"body2",color:"text.secondary",children:[r.length,"개의 파일이 선택되었습니다."]}),n.jsx($,{variant:"contained",onClick:u,loading:s,loadingPosition:"start",disabled:r.length===0||s,fullWidth:!0,children:s?"이미지 처리 중...":"위치 설정 모달 열기"})]}),n.jsx(ae,{open:e,onClose:d,dropzoneFiles:r,onApply:h})]})}const U={render:()=>n.jsx(It,{})};U.parameters={...U.parameters,docs:{...U.parameters?.docs,source:{originalSource:`{
  render: () => <LocationSettingModalExample />
}`,...U.parameters?.docs?.source}}};const _t=["Default"];export{U as Default,_t as __namedExportsOrder,Ut as default};
