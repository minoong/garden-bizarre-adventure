import{j as n}from"./jsx-runtime-DOb6h6Kl.js";import{r as i}from"./iframe-G1VcDnq5.js";import{c as B,e as A,I as de,P as ue,a as Ae,g as Re,h as Z,o as X,u as Ie,i as ae}from"./Modal-DynjEaP8.js";import{m as M,A as pe,p as Fe}from"./proxy-CCJgaq7o.js";import{C as ze}from"./Close-BVfMtAO-.js";import{a as J,g as Q,u as ee,s as W,c as me,d as H,b as te,m as ne,e as Y,C as se,B as L,z as I}from"./Box-B_cBZDYJ.js";import{B as $,D as Oe,a as We,b as De}from"./DialogContent-BQ_3NoZz.js";import{u as He}from"./isFocusVisible-BWa2HzzM.js";import{G as Be}from"./Grow-n3Rxg2P0.js";import{C as $e,S as qe}from"./Stack-DABc7QyY.js";import"./preload-helper-PPVm8Dsz.js";import"./CircularProgress-C-UoWy29.js";import"./index-Dubcewng.js";import"./feature-bundle-CM6saiFr.js";import"./useThemeProps-PhsLEeY_.js";function Ne(e){return Q("MuiAlert",e)}const ie=J("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),_e=B(n.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),Ue=B(n.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),Ve=B(n.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Ge=B(n.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),Ke=e=>{const{variant:t,color:r,severity:o,classes:a}=e,s={root:["root",`color${H(r||o)}`,`${t}${H(r||o)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return te(s,Ne,a)},Xe=W(ue,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${H(r.color||r.severity)}`]]}})(ne(({theme:e})=>{const t=e.palette.mode==="light"?e.darken:e.lighten,r=e.palette.mode==="light"?e.lighten:e.darken;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(Y(["light"])).map(([o])=>({props:{colorSeverity:o,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${o}Color`]:t(e.palette[o].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${o}StandardBg`]:r(e.palette[o].light,.9),[`& .${ie.icon}`]:e.vars?{color:e.vars.palette.Alert[`${o}IconColor`]}:{color:e.palette[o].main}}})),...Object.entries(e.palette).filter(Y(["light"])).map(([o])=>({props:{colorSeverity:o,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${o}Color`]:t(e.palette[o].light,.6),border:`1px solid ${(e.vars||e).palette[o].light}`,[`& .${ie.icon}`]:e.vars?{color:e.vars.palette.Alert[`${o}IconColor`]}:{color:e.palette[o].main}}})),...Object.entries(e.palette).filter(Y(["dark"])).map(([o])=>({props:{colorSeverity:o,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${o}FilledColor`],backgroundColor:e.vars.palette.Alert[`${o}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[o].dark:e.palette[o].main,color:e.palette.getContrastText(e.palette[o].main)}}}))]}})),Ye=W("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Ze=W("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),Je=W("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),le={success:n.jsx(_e,{fontSize:"inherit"}),warning:n.jsx(Ue,{fontSize:"inherit"}),error:n.jsx(Ve,{fontSize:"inherit"}),info:n.jsx(Ge,{fontSize:"inherit"})},Qe=i.forwardRef(function(t,r){const o=ee({props:t,name:"MuiAlert"}),{action:a,children:s,className:b,closeText:m="Close",color:k,components:x={},componentsProps:h={},icon:c,iconMapping:v=le,onClose:w,role:u="alert",severity:y="success",slotProps:C={},slots:d={},variant:f="standard",...S}=o,l={...o,color:k,severity:y,variant:f,colorSeverity:k||y},p=Ke(l),g={slots:{closeButton:x.CloseButton,closeIcon:x.CloseIcon,...d},slotProps:{...h,...C}},[P,E]=A("root",{ref:r,shouldForwardComponentProp:!0,className:me(p.root,b),elementType:Xe,externalForwardedProps:{...g,...S},ownerState:l,additionalProps:{role:u,elevation:0}}),[j,F]=A("icon",{className:p.icon,elementType:Ye,externalForwardedProps:g,ownerState:l}),[R,D]=A("message",{className:p.message,elementType:Ze,externalForwardedProps:g,ownerState:l}),[q,N]=A("action",{className:p.action,elementType:Je,externalForwardedProps:g,ownerState:l}),[z,V]=A("closeButton",{elementType:de,externalForwardedProps:g,ownerState:l}),[G,K]=A("closeIcon",{elementType:$e,externalForwardedProps:g,ownerState:l});return n.jsxs(P,{...E,children:[c!==!1?n.jsx(j,{...F,children:c||v[y]||le[y]}):null,n.jsx(R,{...D,children:s}),a!=null?n.jsx(q,{...N,children:a}):null,a==null&&w?n.jsx(q,{...N,children:n.jsx(z,{size:"small","aria-label":m,title:m,color:"inherit",onClick:w,...V,children:n.jsx(G,{fontSize:"small",...K})})}):null]})});function ce(e){return e.substring(2).toLowerCase()}function et(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function tt(e){const{children:t,disableReactTree:r=!1,mouseEvent:o="onClick",onClickAway:a,touchEvent:s="onTouchEnd"}=e,b=i.useRef(!1),m=i.useRef(null),k=i.useRef(!1),x=i.useRef(!1);i.useEffect(()=>(setTimeout(()=>{k.current=!0},0),()=>{k.current=!1}),[]);const h=Ae(Re(t),m),c=Z(u=>{const y=x.current;x.current=!1;const C=X(m.current);if(!k.current||!m.current||"clientX"in u&&et(u,C))return;if(b.current){b.current=!1;return}let d;u.composedPath?d=u.composedPath().includes(m.current):d=!C.documentElement.contains(u.target)||m.current.contains(u.target),!d&&(r||!y)&&a(u)}),v=u=>y=>{x.current=!0;const C=t.props[u];C&&C(y)},w={ref:h};return s!==!1&&(w[s]=v(s)),i.useEffect(()=>{if(s!==!1){const u=ce(s),y=X(m.current),C=()=>{b.current=!0};return y.addEventListener(u,c),y.addEventListener("touchmove",C),()=>{y.removeEventListener(u,c),y.removeEventListener("touchmove",C)}}},[c,s]),o!==!1&&(w[o]=v(o)),i.useEffect(()=>{if(o!==!1){const u=ce(o),y=X(m.current);return y.addEventListener(u,c),()=>{y.removeEventListener(u,c)}}},[c,o]),i.cloneElement(t,w)}function nt(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:r=!1,onClose:o,open:a,resumeHideDuration:s}=e,b=Ie();i.useEffect(()=>{if(!a)return;function d(f){f.defaultPrevented||f.key==="Escape"&&o?.(f,"escapeKeyDown")}return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[a,o]);const m=Z((d,f)=>{o?.(d,f)}),k=Z(d=>{!o||d==null||b.start(d,()=>{m(null,"timeout")})});i.useEffect(()=>(a&&k(t),b.clear),[a,t,k,b]);const x=d=>{o?.(d,"clickaway")},h=b.clear,c=i.useCallback(()=>{t!=null&&k(s??t*.5)},[t,s,k]),v=d=>f=>{const S=d.onBlur;S?.(f),c()},w=d=>f=>{const S=d.onFocus;S?.(f),h()},u=d=>f=>{const S=d.onMouseEnter;S?.(f),h()},y=d=>f=>{const S=d.onMouseLeave;S?.(f),c()};return i.useEffect(()=>{if(!r&&a)return window.addEventListener("focus",c),window.addEventListener("blur",h),()=>{window.removeEventListener("focus",c),window.removeEventListener("blur",h)}},[r,a,c,h]),{getRootProps:(d={})=>{const f={...ae(e),...ae(d)};return{role:"presentation",...d,...f,onBlur:v(f),onFocus:w(f),onMouseEnter:u(f),onMouseLeave:y(f)}},onClickAway:x}}function ot(e){return Q("MuiSnackbarContent",e)}J("MuiSnackbarContent",["root","message","action"]);const rt=e=>{const{classes:t}=e;return te({root:["root"],action:["action"],message:["message"]},ot,t)},at=W(ue,{name:"MuiSnackbarContent",slot:"Root"})(ne(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98;return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(se(e.palette.background.default,t)),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:se(e.palette.background.default,t),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),st=W("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),it=W("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),lt=i.forwardRef(function(t,r){const o=ee({props:t,name:"MuiSnackbarContent"}),{action:a,className:s,message:b,role:m="alert",...k}=o,x=o,h=rt(x);return n.jsxs(at,{role:m,elevation:6,className:me(h.root,s),ownerState:x,ref:r,...k,children:[n.jsx(st,{className:h.message,ownerState:x,children:b}),a?n.jsx(it,{className:h.action,ownerState:x,children:a}):null]})});function ct(e){return Q("MuiSnackbar",e)}J("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const dt=e=>{const{classes:t,anchorOrigin:r}=e,o={root:["root",`anchorOrigin${H(r.vertical)}${H(r.horizontal)}`]};return te(o,ct,t)},ut=W("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`anchorOrigin${H(r.anchorOrigin.vertical)}${H(r.anchorOrigin.horizontal)}`]]}})(ne(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),pt=i.forwardRef(function(t,r){const o=ee({props:t,name:"MuiSnackbar"}),a=He(),s={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{action:b,anchorOrigin:{vertical:m,horizontal:k}={vertical:"bottom",horizontal:"left"},autoHideDuration:x=null,children:h,className:c,ClickAwayListenerProps:v,ContentProps:w,disableWindowBlurListener:u=!1,message:y,onBlur:C,onClose:d,onFocus:f,onMouseEnter:S,onMouseLeave:l,open:p,resumeHideDuration:g,slots:P={},slotProps:E={},TransitionComponent:j,transitionDuration:F=s,TransitionProps:{onEnter:R,onExited:D,...q}={},...N}=o,z={...o,anchorOrigin:{vertical:m,horizontal:k},autoHideDuration:x,disableWindowBlurListener:u,TransitionComponent:j,transitionDuration:F},V=dt(z),{getRootProps:G,onClickAway:K}=nt({...z}),[xe,re]=i.useState(!0),ve=O=>{re(!0),D&&D(O)},be=(O,T)=>{re(!1),R&&R(O,T)},_={slots:{transition:j,...P},slotProps:{content:w,clickAwayListener:v,transition:q,...E}},[ke,we]=A("root",{ref:r,className:[V.root,c],elementType:ut,getSlotProps:G,externalForwardedProps:{..._,...N},ownerState:z}),[Ce,{ownerState:Se,...Me}]=A("clickAwayListener",{elementType:tt,externalForwardedProps:_,getSlotProps:O=>({onClickAway:(...T)=>{const Te=T[0];O.onClickAway?.(...T),!Te?.defaultMuiPrevented&&K(...T)}}),ownerState:z}),[je,Le]=A("content",{elementType:lt,shouldForwardComponentProp:!0,externalForwardedProps:_,additionalProps:{message:y,action:b},ownerState:z}),[Pe,Ee]=A("transition",{elementType:Be,externalForwardedProps:_,getSlotProps:O=>({onEnter:(...T)=>{O.onEnter?.(...T),be(...T)},onExited:(...T)=>{O.onExited?.(...T),ve(...T)}}),additionalProps:{appear:!0,in:p,timeout:F,direction:m==="top"?"down":"up"},ownerState:z});return!p&&xe?null:n.jsx(Ce,{...Me,...P.clickAwayListener&&{ownerState:Se},children:n.jsx(ke,{...we,children:n.jsx(Pe,{...Ee,children:h||n.jsx(je,{...Le})})})})}),mt=B(n.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}));function ft({open:e,imageFiles:t}){const[r,o]=i.useState(0),[a,s]=i.useState(new Map),[b,m]=i.useState(new Map),[k,x]=i.useState(!1),h=i.useRef(null),c=i.useRef(null),v=i.useRef(null),w=i.useRef(r);i.useEffect(()=>{w.current=r},[r]);const u=t[r],y=a.get(r);i.useEffect(()=>{if(!e){o(0);return}const l=new Map;t.forEach((p,g)=>{p.metadata?.latitude&&p.metadata?.longitude&&l.set(g,{lat:p.metadata.latitude,lng:p.metadata.longitude})}),s(new Map(l)),m(l)},[e]),i.useEffect(()=>{e||(v.current&&(v.current.setMap(null),v.current=null),c.current&&(c.current=null))},[e]);const C=i.useCallback(()=>{const l=b.get(r);s(l?p=>{const g=new Map(p);return g.set(r,l),g}:p=>{const g=new Map(p);return g.delete(r),g})},[r,b]),d=i.useCallback(()=>{h.current&&window.kakao.maps.load(()=>{if(h.current){if(typeof kakao>"u"||!kakao.maps){console.error("카카오 맵 SDK가 로드되지 않았습니다.");return}if(!c.current){const l=a.get(r),p=l?new kakao.maps.LatLng(l.lat,l.lng):new kakao.maps.LatLng(37.5665,126.978),g={center:p,level:3},P=new kakao.maps.Map(h.current,g);if(c.current=P,kakao.maps.event.addListener(P,"click",E=>{const j=E.latLng,F={lat:j.getLat(),lng:j.getLng()};s(R=>{const D=new Map(R);return D.set(w.current,F),D})}),l){const E=new kakao.maps.Marker({position:p,map:P,draggable:!0});kakao.maps.event.addListener(E,"dragend",()=>{const j=E.getPosition();s(F=>{const R=new Map(F);return R.set(w.current,{lat:j.getLat(),lng:j.getLng()}),R})}),v.current=E}}}})},[a,r]);i.useEffect(()=>{if(!e||!c.current||!u)return;const l=a.get(r);if(v.current&&(v.current.setMap(null),v.current=null),l){const p=new kakao.maps.LatLng(l.lat,l.lng),g=new kakao.maps.Marker({position:p,map:c.current,draggable:!0});kakao.maps.event.addListener(g,"dragend",()=>{const P=g.getPosition();s(E=>{const j=new Map(E);return j.set(w.current,{lat:P.getLat(),lng:P.getLng()}),j})}),v.current=g,c.current.setCenter(p)}},[e,r,u,a]);const f=i.useCallback(l=>{o(l);const p=t[l];p.metadata?.latitude&&p.metadata?.longitude||x(!0)},[t]),S=i.useCallback(()=>{x(!1)},[]);return{selectedIndex:r,imageFiles:t,markerPositions:a,originalPositions:b,showToast:k,mapRef:h,kakaoMapRef:c,markerRef:v,selectedFile:u,currentPosition:y,handleImageSelect:f,handleReset:C,handleDialogEntered:d,handleCloseToast:S}}function fe({imageFiles:e,selectedIndex:t,markerPositions:r,onImageSelect:o}){return n.jsxs(L,{component:M.div,initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1},sx:{width:{xs:"100%",md:280},borderRight:{md:1},borderColor:"divider",bgcolor:"grey.50",overflowY:"auto",display:"flex",flexDirection:"column",gap:1,p:2,"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{bgcolor:"transparent"},"&::-webkit-scrollbar-thumb":{bgcolor:"transparent",borderRadius:"3px",transition:"background-color 0.2s"},"&:hover::-webkit-scrollbar-thumb":{bgcolor:"grey.400"},"&::-webkit-scrollbar-thumb:hover":{bgcolor:"grey.600"}},children:[n.jsxs(I,{variant:"subtitle2",fontWeight:"bold",sx:{mb:1},children:["이미지 목록 (",e.length,")"]}),e.map((a,s)=>n.jsxs(L,{component:M.div,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:s*.05},whileTap:{scale:.98},onClick:()=>o(s),sx:{flexShrink:0,cursor:"pointer",border:2,borderColor:t===s?"primary.main":"grey.300",borderRadius:1,overflow:"hidden",position:"relative",bgcolor:"background.paper","&:hover":{borderColor:"primary.light",boxShadow:2},"&:hover img":{transform:"scale(1.1)"}},children:[a.preview&&n.jsx(L,{component:"img",src:a.preview,alt:a.file.name,sx:{width:"100%",height:160,objectFit:"cover",transition:"transform 0.1s ease-in-out"}}),n.jsx(pe,{children:r.has(s)&&n.jsx(L,{component:M.div,initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",stiffness:300,damping:20},sx:{position:"absolute",top:8,right:8,bgcolor:"success.main",color:"white",borderRadius:"50%",width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:"bold",boxShadow:2},children:"✓"})}),n.jsx(L,{component:M.div,animate:{backgroundColor:t===s?"rgba(25, 118, 210, 0.12)":"rgba(255, 255, 255, 1)"},transition:{duration:.2},sx:{p:1},children:n.jsx(I,{variant:"caption",sx:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:t===s?"bold":"normal",color:t===s?"primary.main":"text.secondary"},children:a.file.name})})]},a.id))]})}fe.__docgenInfo={description:"",methods:[],displayName:"ImageList",props:{imageFiles:{required:!0,tsType:{name:"Array",elements:[{name:"FileWithMetadata"}],raw:"FileWithMetadata[]"},description:""},selectedIndex:{required:!0,tsType:{name:"number"},description:""},markerPositions:{required:!0,tsType:{name:"Map",elements:[{name:"number"},{name:"MarkerPosition"}],raw:"Map<number, MarkerPosition>"},description:""},onImageSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}}};function ge({selectedFile:e,currentPosition:t}){return n.jsxs(L,{component:M.div,initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},transition:{duration:.4,delay:.2},sx:{position:"absolute",top:16,left:16,bgcolor:"background.paper",p:2,borderRadius:1,boxShadow:2,zIndex:10,maxWidth:300},children:[n.jsx(I,{variant:"body2",fontWeight:"bold",gutterBottom:!0,children:e&&e.file.name}),n.jsx(pe,{mode:"wait",children:t?n.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[n.jsxs(I,{variant:"caption",display:"block",children:["위도: ",t.lat.toFixed(6)]}),n.jsxs(I,{variant:"caption",display:"block",children:["경도: ",t.lng.toFixed(6)]})]},"position"):n.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:n.jsx(I,{variant:"caption",color:"text.secondary",children:"지도를 클릭하여 위치를 설정하세요"})},"no-position")})]})}ge.__docgenInfo={description:"",methods:[],displayName:"MapInfo",props:{selectedFile:{required:!1,tsType:{name:"FileWithMetadata"},description:""},currentPosition:{required:!1,tsType:{name:"MarkerPosition"},description:""}}};const gt=B(n.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}));function he({onReset:e,hasPosition:t}){return n.jsx(L,{component:M.div,initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},transition:{duration:.4,delay:.3},sx:{position:"absolute",top:16,right:16,zIndex:10,display:"flex",gap:1},children:n.jsx($,{component:M.button,whileHover:{scale:1.05},whileTap:{scale:.95},variant:"contained",startIcon:n.jsx(gt,{}),onClick:e,disabled:!t,children:"초기화"})})}he.__docgenInfo={description:"",methods:[],displayName:"MapToolbar",props:{onReset:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},hasPosition:{required:!0,tsType:{name:"boolean"},description:""}}};function ye({mapRef:e,selectedFile:t,currentPosition:r,onReset:o}){return n.jsxs(L,{component:M.div,initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.4,delay:.15},sx:{flex:1,position:"relative",display:"flex",flexDirection:"column"},children:[n.jsx(L,{ref:e,sx:{width:"100%",height:"100%",minHeight:400}}),n.jsx(ge,{selectedFile:t,currentPosition:r}),n.jsx(he,{onReset:o,hasPosition:!!r})]})}ye.__docgenInfo={description:"",methods:[],displayName:"MapView",props:{mapRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""},selectedFile:{required:!1,tsType:{name:"FileWithMetadata"},description:""},currentPosition:{required:!1,tsType:{name:"MarkerPosition"},description:""},onReset:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function oe({open:e,onClose:t,dropzoneFiles:r,onApply:o}){const[a,s]=i.useState(!1),{selectedIndex:b,imageFiles:m,selectedFile:k,markerPositions:x,currentPosition:h,handleImageSelect:c,handleReset:v,handleDialogEntered:w,mapRef:u}=ft({open:e,imageFiles:r}),y=S=>{c(S);const l=m[S];l.metadata?.latitude&&l.metadata?.longitude||s(!0)},C=()=>{s(!1)},d=()=>{const S=m.map((l,p)=>{const g=x.get(p);return g?{...l,metadata:{...l.metadata,latitude:g.lat,longitude:g.lng}}:l});o(S),t()},f=()=>{t()};return m.length===0?null:n.jsx(Oe,{open:e,onClose:t,maxWidth:!1,fullScreen:!0,slotProps:{transition:{onEntered:w}},children:n.jsxs(L,{sx:{display:"flex",flexDirection:"column",height:"100vh"},children:[n.jsxs(L,{component:M.div,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,borderBottom:1,borderColor:"divider"},children:[n.jsx(I,{variant:"h5",fontWeight:"bold",children:"위치 설정"}),n.jsx(de,{onClick:t,children:n.jsx(ze,{})})]}),n.jsxs(We,{sx:{flex:1,display:"flex",p:0,overflow:"hidden"},children:[n.jsx(fe,{imageFiles:m,selectedIndex:b,markerPositions:x,onImageSelect:y}),n.jsx(ye,{mapRef:u,selectedFile:k,currentPosition:h,onReset:v})]}),n.jsx(L,{component:M.div,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:n.jsxs(De,{sx:{p:2,borderTop:1,borderColor:"divider",gap:1},children:[n.jsx($,{component:M.button,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:f,variant:"outlined",size:"large",children:"취소"}),n.jsx($,{component:M.button,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:d,variant:"contained",size:"large",children:"적용"})]})}),n.jsx(pt,{open:a,autoHideDuration:3e3,onClose:C,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{bottom:{xs:70,sm:80}},children:n.jsx(Qe,{onClose:C,severity:"warning",sx:{width:"100%"},children:"이 이미지에는 위치 정보가 없습니다. 지도를 클릭하여 위치를 설정하세요."})})]})})}oe.__docgenInfo={description:"",methods:[],displayName:"LocationSettingModalLayout",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},dropzoneFiles:{required:!0,tsType:{name:"Array",elements:[{name:"FileWithMetadata"}],raw:"FileWithMetadata[]"},description:""},onApply:{required:!0,tsType:{name:"signature",type:"function",raw:"(updatedFiles: FileWithMetadata[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"FileWithMetadata"}],raw:"FileWithMetadata[]"},name:"updatedFiles"}],return:{name:"void"}}},description:""}}};const Rt={title:"Features/LocationSettingModal",component:oe,parameters:{layout:"centered"},tags:["autodocs"]};function ht(){const[e,t]=i.useState(!1),[r,o]=i.useState([]),[a,s]=i.useState(!1),b=i.useRef(null),m=async c=>{const v=c.target.files;if(v){s(!0);try{const w=Array.from(v),u=await Fe(w);o(u)}finally{s(!1)}}},k=()=>{if(r.length===0){alert("먼저 파일을 업로드해주세요.");return}t(!0)},x=()=>t(!1),h=c=>{console.log("Updated files:",c),o(c),t(!1)};return n.jsxs(L,{sx:{p:3,minWidth:400},children:[n.jsxs(qe,{spacing:2,children:[n.jsx(I,{variant:"h6",children:"위치 설정 모달"}),n.jsxs($,{variant:"outlined",component:"label",startIcon:n.jsx(mt,{}),fullWidth:!0,children:["이미지 파일 선택",n.jsx("input",{ref:b,type:"file",hidden:!0,accept:"image/*",multiple:!0,onChange:m})]}),r.length>0&&!a&&n.jsxs(I,{variant:"body2",color:"text.secondary",children:[r.length,"개의 파일이 선택되었습니다."]}),n.jsx($,{variant:"contained",onClick:k,loading:a,loadingPosition:"start",disabled:r.length===0||a,fullWidth:!0,children:a?"이미지 처리 중...":"위치 설정 모달 열기"})]}),n.jsx(oe,{open:e,onClose:x,dropzoneFiles:r,onApply:h})]})}const U={render:()=>n.jsx(ht,{})};U.parameters={...U.parameters,docs:{...U.parameters?.docs,source:{originalSource:`{
  render: () => <LocationSettingModalExample />
}`,...U.parameters?.docs?.source}}};const It=["Default"];export{U as Default,It as __namedExportsOrder,Rt as default};
